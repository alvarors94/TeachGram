{% extends "base.html" %}
{% block titulo %} Editar perfil {% endblock %}
{% block contenido %} 

<div class="container">
    <header>
        <div class="card">
            <div class="card-header">Editar perfil</div>
            <div class="card-body">
                <img src="{{ user.perfil.profile_pic.url }}" height="150" width="150" style="border-radius: 50%;" />
                <a class="btn edit-gradient ms-3" href="{% url 'cambiar_password' %}" role="button">Cambiar Contraseña</a>
                <form enctype="multipart/form-data" method="post" class="mt-3">
                    {% csrf_token %} 
                    {% for campo in form_perfil %}
                    <div class="mb-3">
                        <strong><label for="{{campo.id}}" class="form-label">{{campo.label}}:</label></strong>
                        <input
                            type="{{campo.field.widget.input_type}}" 
                            class="form-control"
                            id="{{campo.id}}"
                            name="{{campo.name}}"
                            value="{{campo.value}}"/>       
                    </div>
                    <div class="col-12 help-text">{{campo.errors}}</div>
                    {% endfor %}
                    
                    {% for campo in form_user %}
                    {% if campo.name != 'password' %}
                    <div class="mb-3">
                       <strong><label for="{{campo.id}}" class="form-label">{{campo.label}}:</label></strong>
                        <input
                            type="{{campo.field.widget.input_type}}" 
                            class="form-control"
                            id="{{campo.id}}"
                            name="{{campo.name}}"
                            placeholder="{{campo.help_text}}"
                            value="{{ campo.value | default_if_none:'' }}"/>         
                    </div>
                    <div class="col-12 help-text">{{campo.errors}}</div>
                    {% endif %}
                    {% endfor %}

                    <!-- Botón de actualizar información -->
                    <button class="btn comment-gradient" type="button" value="Actualizar información" data-bs-toggle="modal" data-bs-target="#exampleModal"> Actualizar información</button>
                    <a class="btn danger-gradient" href="{% url 'ver_perfil' user.username %}" role="button" >Cancelar</a>
                    
                    <!-- Modal para confirmación de cambios -->
                    <div class="modal fade" id="exampleModal" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
                        <div class="modal-dialog">
                            <div class="modal-content">
                                <div class="modal-header">
                                    <h5 class="modal-title" id="exampleModalLabel">Editar perfil</h5>
                                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                                </div>
                                <div class="modal-body">
                                    ¿Seguro que desea guardar los cambios realizados?
                                </div>
                                <div class="modal-footer">
                                    <button type="button" class="btn danger-gradient" data-bs-dismiss="modal">Cancelar</button>
                                    <!-- Botón de enviar el formulario -->
                                    <button type="submit" class="btn comment-gradient">Guardar cambios</button>
                                </div>
                            </div>
                        </div>
                    </div>
                </form>
            </div>
        </div>
    </header>
</div>

{% endblock %}
